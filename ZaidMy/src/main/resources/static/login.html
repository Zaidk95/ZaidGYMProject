<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In</title>
    <link rel="stylesheet" href="./css/style2.css">
</head>
<body>
        <div class="container">
          <div class="left">
            <div class="login">Login Here</div>
            <div id="g1"></div>
          </div>
          <div class="right">
            <svg viewBox="0 0 320 300">
              <defs>
                <linearGradient
                                inkscape:collect="always"
                                id="linearGradient"
                                x1="13"
                                y1="193.49992"
                                x2="307"
                                y2="193.49992"
                                gradientUnits="userSpaceOnUse">
                  <stop
                        style="stop-color:#ff00ff;"
                        offset="0"
                        id="stop876" />
                  <stop
                        style="stop-color:#ff0000;"
                        offset="1"
                        id="stop878" />
                </linearGradient>
              </defs>
              <path d="m 40,120.00016 239.99984,-3.2e-4 c 0,0 24.99263,0.79932 25.00016,35.00016 0.008,34.20084 -25.00016,35 -25.00016,35 h -239.99984 c 0,-0.0205 -25,4.01348 -25,38.5 0,34.48652 25,38.5 25,38.5 h 215 c 0,0 20,-0.99604 20,-25 0,-24.00396 -20,-25 -20,-25 h -190 c 0,0 -20,1.71033 -20,25 0,24.00396 20,25 20,25 h 168.57143" />
            </svg>
            <div class="form">
              <label for="email">Email Or Id</label>
              <input type="email" id="email" placeholder="Your E-mail Or Id">
              <label for="password">Password</label>
              <input type="password" id="password"  placeholder="Your Password">
              <input type="submit" id="submit" value="Log In" onclick="todo();">
              <div id="r">
              <br>
              <h3>Don't have an account Yet? <a href="Register.html" id="f"> Sign Up </a></h3></div>
              
            </div>
          </div>
        </div>
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" ></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script>
var c = window.localStorage.getItem("myBat");
if( c != "null" ){
	window.location.replace('MyWeb.html');
}

function loginn(){
    var check_res;
    var query = new Object();
    var a = document.getElementById("email").value;
    var b = document.getElementById("password").value;
    $.ajax({ 
        async:false,
        url:"/send/"+a+"/"+b,
        data:query,
        type: "POST",
        dataType: "json",
        success: function(result){
            check_res=result;
        },error:function(){}
    });
    return check_res;    
}

function getId1(){
	var check_res;
    var query = new Object();
    var x = document.getElementById("email").value;
    $.ajax({ 
        async:false,
        url:"/getidi/em?em="+x,
        data:query,
        type: "POST",
        dataType: "json",
        success: function(result){
            check_res=result;
        },error:function(){}
    });
    return check_res;  
}
function getId2(){
	var check_res;
    var query = new Object();
    var x = document.getElementById("email").value;
    $.ajax({ 
        async:false,
        url:"/getide/em?em="+x,
        data:query,
        type: "POST",
        dataType: "json",
        success: function(result){
            check_res=result;
        },error:function(){}
    });
    return check_res;  
}

function todo(){
	if (loginn() === true){
		//var xx = getId2();
		//location.replace("http://localhost:8080/course.html?id="+xx);
		if(isNaN(document.getElementById("email").value) === false){
			var a = getId1();
		}
		else {
			var a = getId2();
		}
		
		window.localStorage.setItem("myCat", a);
		window.localStorage.setItem("myBat", "true");
		window.location.reload(); 
		
	}
	else {
		if(document.getElementById("email").value.length < 1 && document.getElementById("password").value.length < 1){
			document.getElementById("g1").innerHTML = "Please Fill The Blanks To Sign In!!";
		}
		else if(isNaN(document.getElementById("email").value) === true){
			if(Check_Exist() === false){
				document.getElementById("g1").innerHTML = "This Email is Not Exist , Go And Sign Up!";
			}
			else {
				document.getElementById("g1").innerHTML = "This Password Is Wrong , Try Again!";
			}
		}
		else {
			if(Check_Id() === false){
				document.getElementById("g1").innerHTML = "This Id is Not Exist , Go And Sign Up To get one!";
			}
			else {
				document.getElementById("g1").innerHTML = "This Password Is Wrong , Try Again!";
			}
		}
		
	}
}

</script>
      <script  type="text/javascript">
var current = null;
document.querySelector('#email').addEventListener('focus', function(e) {
  if (current) current.pause();
  current = anime({
    targets: 'path',
    strokeDashoffset: {
      value: 0,
      duration: 700,
      easing: 'easeOutQuart'
    },
    strokeDasharray: {
      value: '240 1386',
      duration: 700,
      easing: 'easeOutQuart'
    }
  });
});
document.querySelector('#password').addEventListener('focus', function(e) {
  if (current) current.pause();
  current = anime({
    targets: 'path',
    strokeDashoffset: {
      value: -336,
      duration: 700,
      easing: 'easeOutQuart'
    },
    strokeDasharray: {
      value: '240 1386',
      duration: 700,
      easing: 'easeOutQuart'
    }
  });
});
document.querySelector('#submit').addEventListener('focus', function(e) {
  if (current) current.pause();
  current = anime({
    targets: 'path',
    strokeDashoffset: {
      value: -730,
      duration: 700,
      easing: 'easeOutQuart'
    },
    strokeDasharray: {
      value: '530 1386',
      duration: 700,
      easing: 'easeOutQuart'
    }
  });
});
          </script>
          <script type="text/javascript">
          function Check_Exist(){
       	    var check_res;
       	    var query = new Object();
       	    $.ajax({ 
       	        async:false,
       	        url: "/admin/va/email?email="+(document.getElementById("email").value),
       	        data:query,
       	        type: "POST",
       	        dataType: "json",
       	        success: function(result){
       	            check_res=result;
       	        },error:function(){}
       	    });
       	    return check_res;    
       	}
          function Check_Id(){
         	    var check_res;
         	    var query = new Object();
         	    $.ajax({ 
         	        async:false,
         	        url: "/admin/id/id?id="+(document.getElementById("email").value),
         	        data:query,
         	        type: "POST",
         	        dataType: "json",
         	        success: function(result){
         	            check_res=result;
         	        },error:function(){}
         	    });
         	    return check_res;    
         	}
          </script>
</body>
</html>